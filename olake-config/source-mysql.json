{
  "name": "mysql-demo-source",
  "description": "MySQL source connection for ClickHouse Iceberg demo",
  "type": "mysql",
  "config": {
    "hostname": "mysql",
    "port": 3306,
    "database": "demo_db",
    "username": "olake",
    "password": "olake_pass",
    "ssl": false,
    "connection_timeout": 30,
    "read_timeout": 60,
    "write_timeout": 60,
    "replication": {
      "method": "binlog",
      "server_id": 100,
      "initial_sync": true,
      "gtid_enabled": true,
      "include_tables": [
        "users",
        "products", 
        "orders",
        "user_sessions"
      ],
      "exclude_tables": [],
      "binlog_position": "auto"
    },
    "batch_size": 1000,
    "fetch_size": 10000,
    "sync_mode": "incremental",
    "cursor_field": "updated_at",
    "primary_key": "id"
  },
  "tables": [
    {
      "name": "users",
      "sync_mode": "incremental",
      "cursor_field": "updated_at",
      "primary_key": ["id"],
      "replication_method": "CDC",
      "selected": true,
      "columns": {
        "id": {
          "type": "integer",
          "primary_key": true,
          "auto_increment": true
        },
        "username": {
          "type": "string",
          "max_length": 50,
          "nullable": false
        },
        "email": {
          "type": "string", 
          "max_length": 100,
          "nullable": false
        },
        "full_name": {
          "type": "string",
          "max_length": 100,
          "nullable": true
        },
        "created_at": {
          "type": "timestamp",
          "nullable": false
        },
        "updated_at": {
          "type": "timestamp", 
          "nullable": false
        },
        "status": {
          "type": "enum",
          "values": ["active", "inactive", "premium", "banned"],
          "nullable": false
        },
        "age": {
          "type": "integer",
          "nullable": true
        },
        "country": {
          "type": "string",
          "max_length": 50,
          "nullable": false
        }
      }
    },
    {
      "name": "products",
      "sync_mode": "incremental", 
      "cursor_field": "updated_at",
      "primary_key": ["id"],
      "replication_method": "CDC",
      "selected": true,
      "columns": {
        "id": {
          "type": "integer",
          "primary_key": true,
          "auto_increment": true
        },
        "product_name": {
          "type": "string",
          "max_length": 100,
          "nullable": false
        },
        "category": {
          "type": "string",
          "max_length": 50,
          "nullable": true
        },
        "price": {
          "type": "decimal",
          "precision": 10,
          "scale": 2,
          "nullable": false
        },
        "stock_quantity": {
          "type": "integer",
          "nullable": false
        },
        "created_at": {
          "type": "timestamp",
          "nullable": false
        },
        "updated_at": {
          "type": "timestamp",
          "nullable": false
        },
        "is_active": {
          "type": "boolean",
          "nullable": false
        }
      }
    },
    {
      "name": "orders",
      "sync_mode": "incremental",
      "cursor_field": "order_date", 
      "primary_key": ["id"],
      "replication_method": "CDC",
      "selected": true,
      "columns": {
        "id": {
          "type": "integer",
          "primary_key": true,
          "auto_increment": true
        },
        "user_id": {
          "type": "integer",
          "nullable": false,
          "foreign_key": {
            "table": "users",
            "column": "id"
          }
        },
        "product_id": {
          "type": "integer", 
          "nullable": false,
          "foreign_key": {
            "table": "products",
            "column": "id"
          }
        },
        "quantity": {
          "type": "integer",
          "nullable": false
        },
        "unit_price": {
          "type": "decimal",
          "precision": 10,
          "scale": 2,
          "nullable": false
        },
        "total_amount": {
          "type": "decimal",
          "precision": 12,
          "scale": 2,
          "nullable": false
        },
        "order_date": {
          "type": "timestamp",
          "nullable": false
        },
        "status": {
          "type": "enum",
          "values": ["pending", "confirmed", "shipped", "delivered", "cancelled"],
          "nullable": false
        },
        "shipping_address": {
          "type": "text",
          "nullable": true
        },
        "notes": {
          "type": "text",
          "nullable": true
        }
      }
    },
    {
      "name": "user_sessions",
      "sync_mode": "incremental",
      "cursor_field": "last_activity",
      "primary_key": ["id"],
      "replication_method": "CDC",
      "selected": true,
      "columns": {
        "id": {
          "type": "integer",
          "primary_key": true,
          "auto_increment": true
        },
        "user_id": {
          "type": "integer",
          "nullable": false,
          "foreign_key": {
            "table": "users",
            "column": "id"
          }
        },
        "session_token": {
          "type": "string",
          "max_length": 255,
          "nullable": false
        },
        "ip_address": {
          "type": "string",
          "max_length": 45,
          "nullable": true
        },
        "user_agent": {
          "type": "text",
          "nullable": true
        },
        "login_time": {
          "type": "timestamp",
          "nullable": false
        },
        "last_activity": {
          "type": "timestamp",
          "nullable": false
        },
        "is_active": {
          "type": "boolean",
          "nullable": false
        }
      }
    }
  ],
  "schedule": {
    "type": "cron",
    "cron_expression": "*/5 * * * *",
    "timezone": "UTC"
  },
  "monitoring": {
    "enabled": true,
    "alerts": {
      "connection_failure": true,
      "sync_failure": true,
      "data_freshness": true
    },
    "metrics": {
      "rows_synced": true,
      "sync_duration": true,
      "error_rate": true
    }
  },
  "advanced": {
    "parallelism": 4,
    "memory_limit": "2GB",
    "retry_attempts": 3,
    "retry_delay": "30s",
    "checkpoint_interval": "1m",
    "state_backend": "file"
  }
}
